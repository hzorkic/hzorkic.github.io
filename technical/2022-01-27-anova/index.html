<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Zora Zorkiƒá</title>
<meta name="description" content="The personal website of Zora Zorkiƒá">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://example.org/css/bootstrap.min.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
<link rel="stylesheet" href="https://example.org/css/font-awesome.min.css">
<link rel="stylesheet" href="https://example.org/css/owl.carousel.css">
<link rel="stylesheet" href="https://example.org/css/owl.theme.css">


  <link href="https://example.org/css/style.default.css" rel="stylesheet" id="theme-stylesheet">

 

  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  


<link href="https://example.org/css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="https://example.org/img/favicon.png">



 
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.1/jquery.min.js" ></script> 

<script type="text/javascript" src="js/bigfoot.js"></script> 
<link rel="stylesheet" type="text/css" href="css/bigfoot.css"> 

<script type="text/javascript"> $.bigfoot(); </script> 
</head>
<body>
  <div id="all">
      <div class="container-fluid">
          <div class="row row-offcanvas row-offcanvas-left">
              <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
  <div class="sidebar-content" >
    
    <h1 class="sidebar-heading">
      <div class="hidden-xs"><img style="max-width: 70%; margin-bottom: 15px;  height: auto; border: 2px black solid; border-radius: 190px; max-height: 300px" src="/img/prof.png" alt=""></div>
      
      <a href="https://example.org/">
        
        <img src="https://see.fontimg.com/api/renderfont4/GOZEP/eyJyIjoiZnMiLCJoIjo2NSwidyI6MTAwMCwiZnMiOjY1LCJmZ2MiOiIjMDAwMDAwIiwiYmdjIjoiI0ZGRkZGRiIsInQiOjF9/em9yYSB6b3JraWM/sizelademo-regular.png" alt="Prehistoric fonts" style="height: auto; max-height: 80%; max-width: 100%; margin-bottom: 20px;">
      </a>
    </h1>
    
    
      <p class="sidebar-p" style="margin-bottom: 2px; ">Data Scientist.</p>
    
      <p class="sidebar-p" style="margin-bottom: 2px; ">UX Researcher.</p>
    
    
    
      <p class="sidebar-p" style="margin-top: 20px; "\>üìç Somewhere between Austin and San Diego </p>
    
    
   
    <ul class="sidebar-menu" style="margin-top: 20px; ">
      
        <li><a href="https://example.org/about/">About</a></li>
      
        <li><a href="https://example.org/portfolio/">Portfolio</a></li>
      
        <li><a href="https://example.org/technical/">Technical</a></li>
      
        <li><a href="https://example.org/creative/">Creative</a></li>
      
        <li><a href="https://example.org/img/RESUME.pdf">CV</a></li>
      
      
      
    </ul>
    <p class="social">
  
  
  
  
  
  <a href="mailto:hayley.zorkic@gmail.com" data-animate-hover="pulse" class="email" title="E-mail">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://www.linkedin.com/in/hayley-zorkic" data-animate-hover="pulse" class="external" title="LinkedIn" rel="me">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
  
  <a href="https://github.com/hzorkic" data-animate-hover="pulse" class="external" title="GitHub" rel="me">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  
</p>

      <div class="copyright" style="font-size: 2px;">
        
      </div>
    
    
    

    
  </div>
</div>

              
<div class="col-xs-12 col-sm-8 col-md-9 content-column white-background">
  <div class="small-navbar visible-xs">
  <button type="button" data-toggle="offcanvas" class="btn btn-ghost">
    <i class="fa fa-bars"></i>
  </button>
  <h1 class="small-navbar-heading">
    <a href="https://example.org/">
      <img src="https://see.fontimg.com/api/renderfont4/GOZEP/eyJyIjoiZnMiLCJoIjo2NSwidyI6MTAwMCwiZnMiOjY1LCJmZ2MiOiIjMDAwMDAwIiwiYmdjIjoiI0ZGRkZGRiIsInQiOjF9/em9yYSB6b3JraWM/sizelademo-regular.png"
      style="max-height:30px;">
    </a>
  </h1>
</div>

  <div class="row">
    <div class="col-lg-8">
      <div class="content-column-content">
         <h1>ANOVA Walkthrough</h1>
         


<p><img src="/img/portfolio/anova_main.jpeg" /></p>
<div id="what-is-anova" class="section level3">
<h3>What is ANOVA?</h3>
<p>ANOVA (Analysis of Variance) falls under a category of techniques called <em>inferential statistics</em> which allow you to test hypotheses or assess if Analysis of Variance your sample is generalizablbe to a broader population. A one-way ANOVA is a technique that extends the independent two-sample t-test to multiple groups, enabling users to determine if there is a statistically significant difference between group population means.</p>
</div>
<div id="why-anova" class="section level3">
<h3>Why ANOVA?</h3>
<p>Say, for example, we want to find out which pre-workout snack lead to different mean mile times. For this example, we will be testing carrots, snickers, and bannans. Because there are millions of people around the world who workout everyday, it would be almost impossible to asses the effect of their pre-workout snack on their mile time, so we select a <em>random sample</em> of individuals who work out and give each of them one of the three pre-workout snacks, and record their mile time after they eat their respective snack.</p>
<p>Due to natural variation between people, the mean mile time between each group will vary, but one-way ANOVAs allow us to determine if the difference between group means is statistically significant.</p>
<hr />
</div>
<div id="anova-assumptions" class="section level3">
<h3>ANOVA Assumptions</h3>
<p>In order for the ANOVA results to be valid, we need to meet the following assumptiosn.</p>
<p><strong>1. Random Sample, Independent observations, and Independent sample groups</strong></p>
<ul>
<li>These are ensured by experiment design</li>
</ul>
<p><strong>2. Normal distribution in each group OR large sample in each group</strong></p>
<ul>
<li>Eyeball a histogram/boxplot/qqplot of the response in each groups</li>
</ul>
<pre class="r"><code>#make this example reproducible
set.seed(0)

#create data frame
data &lt;- data.frame(snack = rep(c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;), each = 30),
                   mile_time = c(runif(30, 0, 3),
                                   runif(30, 0, 5),
                                   runif(30, 1, 7)))

#fit the one-way ANOVA model
model &lt;- aov(mile_time ~ snack, data = data)

#create histogram
hist(data$mile_time)</code></pre>
<p><img src="https://example.org/technical/2022-01-27-anova/index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>#create Q-Q plot to compare this dataset to a theoretical normal distribution 
qqnorm(model$residuals)

#add straight diagonal line to plot
qqline(model$residuals)</code></pre>
<p><img src="https://example.org/technical/2022-01-27-anova/index_files/figure-html/unnamed-chunk-2-1.png" width="672" />
- Run a formal statistical analysis on the residuals such as the Shapiro-Wilk, Kolmogorov-Smironov, Jarque-Barre, or D‚ÄôAgostino-Pearson tests.</p>
<pre class="r"><code>#Conduct Shapiro-Wilk Test for normality 
shapiro.test(data$mile_time)</code></pre>
<pre><code>## 
## 	Shapiro-Wilk normality test
## 
## data:  data$mile_time
## W = 0.9587, p-value = 0.005999</code></pre>
<p><strong>3. Equal variance in each group</strong></p>
<ul>
<li>Eeyball boxplot or run bartlett‚Äôs test</li>
</ul>
<pre class="r"><code>#Create box plots that show distribution of weight loss for each group
boxplot(mile_time ~ snack, xlab=&#39;Snack&#39;, ylab=&#39;Mile Time&#39;, data=data)</code></pre>
<p><img src="https://example.org/technical/2022-01-27-anova/index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>#Create box plots that show distribution of weight loss for each group
bartlett.test(mile_time ~ snack, data=data)</code></pre>
<pre><code>## 
## 	Bartlett test of homogeneity of variances
## 
## data:  mile_time by snack
## Bartlett&#39;s K-squared = 8.2713, df = 2, p-value = 0.01599</code></pre>
<ul>
<li>sd should not be more than 2X bigger in one group compared to another</li>
</ul>
<hr />
</div>
<div id="how-to-run-a-one-way-anova" class="section level3">
<h3>How to run a one-way ANOVA</h3>
<p>One-way ANOVAs use the standard null/alternative hypothese.</p>
<p><strong>Ho (null): </strong> the population means are equal</p>
<p><strong>Ha (alternative): </strong> at least one population mean in different from the rest</p>
<p>After running your analysis, your output will something like this:</p>
<p><img src="/img/portfolio/anova_tablbe.png" /></p>
<ul>
<li>SSR: regression sum of squares</li>
<li>SSE: error sum of squares</li>
<li>SST: total sum of squares (SST = SSR + SSE)</li>
<li>dfr: regression degrees of freedom (dfr = k-1)</li>
<li>dfe: error degrees of freedom (dfe = n-k)</li>
<li>dft: total degrees of freedom (dft = n-1)</li>
<li>k: total number of groups</li>
<li>n: total observations</li>
<li>MSTr: regression mean square (MSTr = SSR/dfr)</li>
<li>MSE: error mean square (MSE = SSE/dfe)</li>
<li>F: The F test statistic (F = MSR/MSE)</li>
<li>p: The p-value that corresponds to Fdfr, dfe</li>
</ul>
<p>If the p-value is less than 0.05 (or another chosen significance value) then we can reject the null hypothesis and conclude one of the population means is different from the rest.</p>
<p>If and only if you conclude there is at least one difference in population means from the one-way ANOVA, you need to perform post hoc tests to figure out exactly WHICH population means are different from eachother.</p>
<hr />
</div>
<div id="one-way-anova-walkthrough" class="section level3">
<h3>One-way ANOVA walkthrough</h3>
<p>Back to our original example: snacks and running times. Say, for example, we want to find out which pre-workout snack lead to different mean mile times. For this example, we will be testing carrots, snickers, and bannans. Because there are millions of people around the world who workout everyday, it would be almost impossible to asses the effect of their pre-workout snack on their mile time, so we select a <em>random sample</em> of individuals who work out and give each of them one of the three pre-workout snacks, and record their mile time after they eat their respective snack.</p>
<pre class="r"><code>#make this example reproducible
set.seed(0)

#create data frame
data &lt;- data.frame(snack = rep(c(&quot;carrot&quot;, &quot;snickers&quot;, &quot;bannana&quot;), each = 30),
                   mile_time = c(runif(30, 6, 7),
                                   runif(30, 4, 5),
                                   runif(30, 8, 12)))
head(data)</code></pre>
<pre><code>##    snack mile_time
## 1 carrot  6.896697
## 2 carrot  6.265509
## 3 carrot  6.372124
## 4 carrot  6.572853
## 5 carrot  6.908208
## 6 carrot  6.201682</code></pre>
<p>Now that we have our data, lets check our assumptions.</p>
<pre class="r"><code>#load dplyr package
library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>#find mean and standard deviation of weight loss for each treatment group
data %&gt;%
  group_by(snack) %&gt;%
  summarise(mean = mean(mile_time),
            sd = sd(mile_time))</code></pre>
<pre><code>## # A tibble: 3 √ó 3
##   snack     mean    sd
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;
## 1 bannana  10.1  1.05 
## 2 carrot    6.53 0.302
## 3 snickers  4.51 0.248</code></pre>
<pre class="r"><code>#create boxplots
boxplot(mile_time ~ snack,
data = data,
main = &quot;Mile Time Distribution by Snack&quot;,
xlab = &quot;Snack&quot;,
ylab = &quot;Mile Time&quot;,
col = &quot;steelblue&quot;,
border = &quot;black&quot;)</code></pre>
<p><img src="https://example.org/technical/2022-01-27-anova/index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code># install.packages(&quot;ggplot2&quot;)
library(ggplot2)

# Basic density plot in ggplot2
cols &lt;- c(&quot;#F76D5E&quot;, &quot;#FFFFBF&quot;, &quot;#72D8FF&quot;)

ggplot(data, aes(x = mile_time, fill = snack)) +
  geom_density(alpha = 0.7) + 
  scale_fill_manual(values = cols)</code></pre>
<p><img src="https://example.org/technical/2022-01-27-anova/index_files/figure-html/unnamed-chunk-9-1.png" width="672" />
Here we can clearly see a difference in mile times between the groups. It also looks like the bananas snack group has a higher standard deviation compared to the other snacks.</p>
<ol style="list-style-type: decimal">
<li>Check for independence. We used a randomized experiment design, so this assumption is met.</li>
<li>Normality. The dependent variables are approximately normally distributed for each predictor variable.</li>
<li>Equal Variance. The variance for each group appears to be equal.</li>
</ol>
<pre class="r"><code>plot(model)</code></pre>
<p><img src="https://example.org/technical/2022-01-27-anova/index_files/figure-html/unnamed-chunk-10-1.png" width="672" /><img src="https://example.org/technical/2022-01-27-anova/index_files/figure-html/unnamed-chunk-10-2.png" width="672" /><img src="https://example.org/technical/2022-01-27-anova/index_files/figure-html/unnamed-chunk-10-3.png" width="672" /><img src="https://example.org/technical/2022-01-27-anova/index_files/figure-html/unnamed-chunk-10-4.png" width="672" />
The Residuals vs Fitted plot lets us check equal variance assumption. The residuals should be equally spread for each level of the fitted value, but the plot above shows the residuals are much more spread out for the higher values. Our equal variance assumption might be violated. To formally check for equal variance, lets run Levene‚Äôs test.</p>
<pre class="r"><code>#load car package
library(car)</code></pre>
<pre><code>## Loading required package: carData</code></pre>
<pre><code>## 
## Attaching package: &#39;car&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     recode</code></pre>
<pre class="r"><code>#conduct Levene&#39;s Test for equality of variances
leveneTest(mile_time ~ snack, data = data)</code></pre>
<pre><code>## Warning in leveneTest.default(y = y, group = group, ...): group coerced to
## factor.</code></pre>
<pre><code>## Levene&#39;s Test for Homogeneity of Variance (center = median)
##       Df F value    Pr(&gt;F)    
## group  2  30.537 8.982e-11 ***
##       87                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>Our p-value is &lt;&lt;0.05. This means we accept the null hypothesis that there is equal variance across the 3 programs‚Ä¶ Great!</p>
<p>The QQplot lets us check normality. The standardized residuals should fall straight on the diagonal line, but the plot above shows fraying at the beginning and the end. Out normality assumption might be violated. We could attempt to transform the data in order to make it follow a</p>
<p>Now, lets fit the one-way ANOVA model.
Here we are using the R aov() function which takes the response variable parameter, the predictor variable parameter, and the data set. In our case, we are using mile_time as the response variable and snack as the predictor variable.</p>
<pre class="r"><code>#fit the one-way ANOVA model
model &lt;- aov(mile_time ~ snack, data = data)

#view the model output
summary(model)</code></pre>
<pre><code>##             Df Sum Sq Mean Sq F value Pr(&gt;F)    
## snack        2  478.0  238.98   575.6 &lt;2e-16 ***
## Residuals   87   36.1    0.42                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>The Pr( &gt;F ) value in the output tells us there is a significantly different mean mile times that resulted from each of the snack choices! Great. Now to figure out exactly which means are significantly different, we need to run a post hoc test.</p>
<p>To run a post-hoc test, we will use Tukey‚Äôs test of multiple comparisons.</p>
<pre class="r"><code>#perform Tukey&#39;s Test for multiple comparisons
TukeyHSD(model, conf.level=.95) </code></pre>
<pre><code>##   Tukey multiple comparisons of means
##     95% family-wise confidence level
## 
## Fit: aov(formula = mile_time ~ snack, data = data)
## 
## $snack
##                       diff       lwr       upr p adj
## carrot-bannana   -3.558366 -3.955068 -3.161663     0
## snickers-bannana -5.574056 -5.970759 -5.177354     0
## snickers-carrot  -2.015691 -2.412393 -1.618988     0</code></pre>
<p>All of the p-values in this output are &lt;&lt; 0.05, so we reject the null that there is no difference between the groups. In the table above, we can see that there is a statistically significant difference between the mean mile time of each snack group!</p>
</div>
<div id="report-results" class="section level3">
<h3>Report Results</h3>
<p>This was always the most confusing part of statistical analysis for me- properly recording the test results in APA format. Below you will find a standard results report for a one-way ANOVA:</p>
<blockquote>
<p>A one-way ANOVA was performed to compare the effect of [independent variable] on [dependent variable]..</p>
<p>A one-way ANOVA revealed that there [was or was not] a statistically significant difference in [dependent variable] between at least two groups (F(between groups df, within groups df) = [F-value], p = [p-value]).</p>
<p>Tukey‚Äôs HSD Test for multiple comparisons found that the mean value of [dependent variable] was significantly different between [group name] and [group name] (p = [p-value], 95% C.I. = [lower, upper]).</p>
<p>There was no statistically significant difference between [group name] and [group name] (p=[p-value]).</p>
</blockquote>
<p>For our walkthrough example, this would be the proper format:</p>
<p>A one-way ANOVA was conducted to examine the effects of pre-workout snack on mile time (measured in minutes). There was a statistically significant difference between the effects of the three programs on weight loss (F(2, 87) = 575.6, p = &lt;2e-16). Tukey‚Äôs HSD post hoc tests were carried out.</p>
<p>The mean mile time for participants who ate carrots is significantly less than than the mean mile time for participants who ate a bannana (p &lt; 0.0001).</p>
<p>The mean mile time for participants who ate snickers is significantly lower than the mean mile time for participants who ate a bannana (p &lt; 0.0001).</p>
<p>The mean mile time for participants who ate snickers is significantly lower than the mean mile time for participants who ate a carrot (p &lt; 0.0001).</p>
</div>

         
      </div>
    </div>
  </div>
</div>

          </div>
      </div>
  </div>
  <script src="https://example.org/js/jquery.min.js"></script>
<script src="https://example.org/js/bootstrap.min.js"></script>
<script src="https://example.org/js/jquery.cookie.js"> </script>
<script src="https://example.org/js/ekko-lightbox.js"></script>
<script src="https://example.org/js/jquery.scrollTo.min.js"></script>
<script src="https://example.org/js/masonry.pkgd.min.js"></script>
<script src="https://example.org/js/imagesloaded.pkgd.min.js"></script>
<script src="https://example.org/js/owl.carousel.min.js"></script>
<script src="https://example.org/js/front.js"></script>



</body>
</html>
